{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useEffect, useContext } from 'react';\nimport { FormField } from 'grommet';\nimport { FormContext } from '../Form/Form';\nexport const WithFormField = _a => {\n  var {\n    validation,\n    label,\n    description,\n    name,\n    controlLabel,\n    inField,\n    children\n  } = _a,\n      other = __rest(_a, [\"validation\", \"label\", \"description\", \"name\", \"controlLabel\", \"inField\", \"children\"]);\n\n  const form = useContext(FormContext);\n  const {\n    onFieldChange,\n    getFieldValue,\n    getFieldErrors\n  } = form;\n  useEffect(() => {\n    form.attachToForm(name, {\n      label,\n      description,\n      validation\n    });\n    return () => {\n      form.detachFromForm(name);\n    };\n  });\n\n  const onChange = e => {\n    const {\n      value,\n      target\n    } = e;\n    const targetValue = target ? target.value : undefined;\n    onFieldChange(name, value || targetValue, e);\n  };\n\n  const getValue = () => {\n    const value = getFieldValue(name);\n    return value === undefined ? '' : value;\n  };\n\n  const errors = getFieldErrors(name);\n  let error = Array.isArray(errors) ? errors[0] : errors;\n\n  if (typeof error === 'function') {\n    error = error(typeof label === 'string' ? label : name);\n  }\n\n  const field = children(Object.assign({\n    id: name,\n    name,\n    label: inField ? controlLabel : label,\n    value: getValue(),\n    onChange\n  }, other));\n\n  if (!inField) {\n    return field;\n  }\n\n  return React.createElement(FormField, {\n    htmlFor: name,\n    label: label || controlLabel === true && name,\n    error: error\n  }, field);\n};\nWithFormField.defaultProps = {\n  validation: undefined,\n  inField: true,\n  controlLabel: undefined,\n  label: undefined,\n  description: undefined,\n  Control: React.Component\n};","map":{"version":3,"sources":["../../../src/components/WithFormField/WithFormField.tsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,KAAP,IAAgB,SAAhB,EAA2B,UAA3B,QAA6C,OAA7C;AACA,SAAS,SAAT,QAA0B,SAA1B;AACA,SAAS,WAAT,QAA4B,cAA5B;AAGA,OAAO,MAAM,aAAa,GAAI,EAAD,IASH;MATI;AAC5B,IAAA,UAD4B;AAE5B,IAAA,KAF4B;AAG5B,IAAA,WAH4B;AAI5B,IAAA,IAJ4B;AAK5B,IAAA,YAL4B;AAM5B,IAAA,OAN4B;AAO5B,IAAA;AAP4B,MAOpB,E;MACL,KAAK,GAAA,MAAA,CAAA,EAAA,EARoB,CAAA,YAAA,EAAA,OAAA,EAAA,aAAA,EAAA,MAAA,EAAA,cAAA,EAAA,SAAA,EAAA,UAAA,CAQpB,C;;AAER,QAAM,IAAI,GAAG,UAAU,CAAC,WAAD,CAAvB;AACA,QAAM;AAAE,IAAA,aAAF;AAAiB,IAAA,aAAjB;AAAgC,IAAA;AAAhC,MAAmD,IAAzD;AACA,EAAA,SAAS,CAAC,MAAK;AACb,IAAA,IAAI,CAAC,YAAL,CAAkB,IAAlB,EAAwB;AAAE,MAAA,KAAF;AAAS,MAAA,WAAT;AAAsB,MAAA;AAAtB,KAAxB;AACA,WAAO,MAAK;AACV,MAAA,IAAI,CAAC,cAAL,CAAoB,IAApB;AACD,KAFD;AAGD,GALQ,CAAT;;AAOA,QAAM,QAAQ,GAAG,CAAC,IAAG;AACnB,UAAM;AAAE,MAAA,KAAF;AAAS,MAAA;AAAT,QAAoB,CAA1B;AACA,UAAM,WAAW,GAAG,MAAM,GAAG,MAAM,CAAC,KAAV,GAAkB,SAA5C;AACA,IAAA,aAAa,CAAC,IAAD,EAAO,KAAK,IAAI,WAAhB,EAA6B,CAA7B,CAAb;AACD,GAJD;;AAKA,QAAM,QAAQ,GAAG,MAAK;AACpB,UAAM,KAAK,GAAG,aAAa,CAAC,IAAD,CAA3B;AACA,WAAO,KAAK,KAAK,SAAV,GAAsB,EAAtB,GAA2B,KAAlC;AACD,GAHD;;AAIA,QAAM,MAAM,GAAG,cAAc,CAAC,IAAD,CAA7B;AACA,MAAI,KAAK,GAAG,KAAK,CAAC,OAAN,CAAc,MAAd,IAAwB,MAAM,CAAC,CAAD,CAA9B,GAAoC,MAAhD;;AACA,MAAI,OAAO,KAAP,KAAiB,UAArB,EAAiC;AAC/B,IAAA,KAAK,GAAG,KAAK,CAAC,OAAO,KAAP,KAAiB,QAAjB,GAA4B,KAA5B,GAAoC,IAArC,CAAb;AACD;;AACD,QAAM,KAAK,GAAG,QAAQ,CAAA,MAAA,CAAA,MAAA,CAAA;AACpB,IAAA,EAAE,EAAE,IADgB;AAEpB,IAAA,IAFoB;AAGpB,IAAA,KAAK,EAAE,OAAO,GAAG,YAAH,GAAkB,KAHZ;AAIpB,IAAA,KAAK,EAAE,QAAQ,EAJK;AAKpB,IAAA;AALoB,GAAA,EAMjB,KANiB,CAAA,CAAtB;;AAQA,MAAI,CAAC,OAAL,EAAc;AACZ,WAAO,KAAP;AACD;;AACD,SACE,KAAA,CAAA,aAAA,CAAC,SAAD,EAAU;AACR,IAAA,OAAO,EAAE,IADD;AAER,IAAA,KAAK,EAAE,KAAK,IAAK,YAAY,KAAK,IAAjB,IAAyB,IAFlC;AAGR,IAAA,KAAK,EAAE;AAHC,GAAV,EAKG,KALH,CADF;AASD,CArDM;AAuDP,aAAa,CAAC,YAAd,GAA6B;AAC3B,EAAA,UAAU,EAAE,SADe;AAE3B,EAAA,OAAO,EAAE,IAFkB;AAG3B,EAAA,YAAY,EAAE,SAHa;AAI3B,EAAA,KAAK,EAAE,SAJoB;AAK3B,EAAA,WAAW,EAAE,SALc;AAM3B,EAAA,OAAO,EAAE,KAAK,CAAC;AANY,CAA7B","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useEffect, useContext } from 'react';\nimport { FormField } from 'grommet';\nimport { FormContext } from '../Form/Form';\nexport const WithFormField = (_a) => {\n    var { validation, label, description, name, controlLabel, inField, children } = _a, other = __rest(_a, [\"validation\", \"label\", \"description\", \"name\", \"controlLabel\", \"inField\", \"children\"]);\n    const form = useContext(FormContext);\n    const { onFieldChange, getFieldValue, getFieldErrors } = form;\n    useEffect(() => {\n        form.attachToForm(name, { label, description, validation });\n        return () => {\n            form.detachFromForm(name);\n        };\n    });\n    const onChange = e => {\n        const { value, target } = e;\n        const targetValue = target ? target.value : undefined;\n        onFieldChange(name, value || targetValue, e);\n    };\n    const getValue = () => {\n        const value = getFieldValue(name);\n        return value === undefined ? '' : value;\n    };\n    const errors = getFieldErrors(name);\n    let error = Array.isArray(errors) ? errors[0] : errors;\n    if (typeof error === 'function') {\n        error = error(typeof label === 'string' ? label : name);\n    }\n    const field = children(Object.assign({ id: name, name, label: inField ? controlLabel : label, value: getValue(), onChange }, other));\n    if (!inField) {\n        return field;\n    }\n    return (React.createElement(FormField, { htmlFor: name, label: label || (controlLabel === true && name), error: error }, field));\n};\nWithFormField.defaultProps = {\n    validation: undefined,\n    inField: true,\n    controlLabel: undefined,\n    label: undefined,\n    description: undefined,\n    Control: React.Component,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2l0aEZvcm1GaWVsZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1dpdGhGb3JtRmllbGQvV2l0aEZvcm1GaWVsZC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEtBQUssRUFBRSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDckQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNwQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRzNDLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUFDLEVBU1IsRUFBRSxFQUFFO1FBVEksRUFDNUIsVUFBVSxFQUNWLEtBQUssRUFDTCxXQUFXLEVBQ1gsSUFBSSxFQUNKLFlBQVksRUFDWixPQUFPLEVBQ1AsUUFBUSxPQUVZLEVBRGpCLEtBQUssY0FSb0IscUZBUzdCLENBRFM7SUFFUixNQUFNLElBQUksR0FBRyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDckMsTUFBTSxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLEdBQUcsSUFBSSxDQUFDO0lBQzlELFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUM1RCxPQUFPLEdBQUcsRUFBRTtZQUNWLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUIsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsRUFBRTtRQUNuQixNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztRQUM1QixNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUN0RCxhQUFhLENBQUMsSUFBSSxFQUFFLEtBQUssSUFBSSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0lBQ0YsTUFBTSxRQUFRLEdBQUcsR0FBRyxFQUFFO1FBQ3BCLE1BQU0sS0FBSyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxPQUFPLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQzFDLENBQUMsQ0FBQztJQUNGLE1BQU0sTUFBTSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUN2RCxJQUFJLE9BQU8sS0FBSyxLQUFLLFVBQVUsRUFBRTtRQUMvQixLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN6RDtJQUNELE1BQU0sS0FBSyxHQUFHLFFBQVEsaUJBQ3BCLEVBQUUsRUFBRSxJQUFJLEVBQ1IsSUFBSSxFQUNKLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUNyQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQ2pCLFFBQVEsSUFDTCxLQUFLLEVBQ1IsQ0FBQztJQUNILElBQUksQ0FBQyxPQUFPLEVBQUU7UUFDWixPQUFPLEtBQUssQ0FBQztLQUNkO0lBQ0QsT0FBTyxDQUNMLG9CQUFDLFNBQVMsSUFDUixPQUFPLEVBQUUsSUFBSSxFQUNiLEtBQUssRUFBRSxLQUFLLElBQUksQ0FBQyxZQUFZLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxFQUMvQyxLQUFLLEVBQUUsS0FBSyxJQUVYLEtBQUssQ0FDSSxDQUNiLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixhQUFhLENBQUMsWUFBWSxHQUFHO0lBQzNCLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLE9BQU8sRUFBRSxJQUFJO0lBQ2IsWUFBWSxFQUFFLFNBQVM7SUFDdkIsS0FBSyxFQUFFLFNBQVM7SUFDaEIsV0FBVyxFQUFFLFNBQVM7SUFDdEIsT0FBTyxFQUFFLEtBQUssQ0FBQyxTQUFTO0NBQ3pCLENBQUMifQ=="]},"metadata":{},"sourceType":"module"}