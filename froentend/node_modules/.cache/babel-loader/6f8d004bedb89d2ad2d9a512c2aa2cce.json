{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.DropContainer = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _FocusedContainer = require(\"../FocusedContainer\");\n\nvar _utils = require(\"../../utils\");\n\nvar _defaultProps = require(\"../../default-props\");\n\nvar _Box = require(\"../Box\");\n\nvar _Keyboard = require(\"../Keyboard\");\n\nvar _StyledDrop = require(\"./StyledDrop\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n} // using react synthetic event to be able to stop propagation that\n// would otherwise close the layer on ESC.\n\n\nvar preventLayerClose = function preventLayerClose(event) {\n  var key = event.keyCode ? event.keyCode : event.which;\n\n  if (key === 27) {\n    event.stopPropagation();\n  }\n};\n\nvar defaultAlign = {\n  top: 'top',\n  left: 'left'\n};\nvar defaultPortalContext = [];\nvar DropContainer = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var _ref$align = _ref.align,\n      align = _ref$align === void 0 ? defaultAlign : _ref$align,\n      children = _ref.children,\n      dropTarget = _ref.dropTarget,\n      elevation = _ref.elevation,\n      onClickOutside = _ref.onClickOutside,\n      onEsc = _ref.onEsc,\n      onKeyDown = _ref.onKeyDown,\n      _ref$overflow = _ref.overflow,\n      overflow = _ref$overflow === void 0 ? 'auto' : _ref$overflow,\n      plain = _ref.plain,\n      responsive = _ref.responsive,\n      restrictFocus = _ref.restrictFocus,\n      _ref$stretch = _ref.stretch,\n      stretch = _ref$stretch === void 0 ? 'width' : _ref$stretch,\n      trapFocus = _ref.trapFocus,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"align\", \"children\", \"dropTarget\", \"elevation\", \"onClickOutside\", \"onEsc\", \"onKeyDown\", \"overflow\", \"plain\", \"responsive\", \"restrictFocus\", \"stretch\", \"trapFocus\"]);\n\n  var theme = (0, _react.useContext)(_styledComponents.ThemeContext) || _defaultProps.defaultProps.theme;\n\n  var portalContext = (0, _react.useContext)(_utils.PortalContext) || defaultPortalContext;\n  var portalId = (0, _react.useMemo)(function () {\n    return portalContext.length;\n  }, [portalContext]);\n  var nextPortalContext = (0, _react.useMemo)(function () {\n    return [].concat(portalContext, [portalId]);\n  }, [portalContext, portalId]);\n  var dropRef = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    // We try to preserve the maxHeight as changing it causes any scroll\n    // position to be lost. We set the maxHeight on mount and if the window\n    // is resized.\n    var place = function place(preserveHeight) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var target = dropTarget;\n      var container = (ref || dropRef).current;\n\n      if (container && target) {\n        // clear prior styling\n        container.style.left = '';\n        container.style.top = '';\n        container.style.bottom = '';\n        container.style.width = '';\n\n        if (!preserveHeight) {\n          container.style.maxHeight = '';\n        } // get bounds\n\n\n        var targetRect = target.getBoundingClientRect();\n        var containerRect = container.getBoundingClientRect(); // determine width\n\n        var width;\n\n        if (stretch) {\n          width = Math.min(stretch === 'align' ? Math.min(targetRect.width, containerRect.width) : Math.max(targetRect.width, containerRect.width), windowWidth);\n        } else {\n          width = Math.min(containerRect.width, windowWidth);\n        } // set left position\n\n\n        var left;\n\n        if (align.left) {\n          if (align.left === 'left') {\n            left = targetRect.left;\n          } else if (align.left === 'right') {\n            left = targetRect.left + targetRect.width;\n          }\n        } else if (align.right) {\n          if (align.right === 'left') {\n            left = targetRect.left - width;\n          } else if (align.right === 'right') {\n            left = targetRect.left + targetRect.width - width;\n          }\n        } else {\n          left = targetRect.left + targetRect.width / 2 - width / 2;\n        }\n\n        if (left + width > windowWidth) {\n          left -= left + width - windowWidth;\n        } else if (left < 0) {\n          left = 0;\n        } // set top or bottom position\n\n\n        var top;\n        var bottom;\n        var maxHeight = containerRect.height;\n\n        if (align.top) {\n          if (align.top === 'top') {\n            top = targetRect.top;\n          } else {\n            top = targetRect.bottom;\n          } // Calculate visible area underneath the control w.r.t window height\n\n\n          var percentVisibleAreaBelow = 100 - targetRect.bottom / windowHeight * 100; // Check whether it is within 20% from bottom of the window or\n          // visible area to flip the control\n          // DropContainer doesn't fit well within visible area when\n          // percentVisibleAreaBelow value<=20%\n          // There is enough space from DropContainer to bottom of the window\n          // when percentVisibleAreaBelow>20%.\n\n          if (windowHeight === top || percentVisibleAreaBelow <= 20) {\n            // We need more room than we have.\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              bottom = targetRect.top;\n            } else {\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else if (top > 0) {\n            maxHeight = windowHeight - top;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else {\n            maxHeight = windowHeight - top;\n          }\n        } else if (align.bottom) {\n          if (align.bottom === 'bottom') {\n            bottom = targetRect.bottom;\n          } else {\n            bottom = targetRect.top;\n          }\n\n          maxHeight = bottom;\n          container.style.maxHeight = maxHeight + \"px\";\n        } else {\n          // center\n          top = targetRect.top + targetRect.height / 2 - containerRect.height / 2;\n          maxHeight = windowHeight - top;\n        } // if we can't fit it all, or we're rather close,\n        // see if there's more room the other direction\n\n\n        if (responsive && (containerRect.height > maxHeight || maxHeight < windowHeight / 10)) {\n          // We need more room than we have.\n          if (align.top && top > windowHeight / 2) {\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              // top = Math.max(targetRect.top - containerRect.height, 0);\n              // maxHeight = targetRect.top - top;\n              bottom = targetRect.top;\n            } else {\n              // top = Math.max(targetRect.bottom - containerRect.height, 0);\n              // maxHeight = targetRect.bottom - top;\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n          } else if (align.bottom && maxHeight < windowHeight / 2) {\n            // We put it above but there's more room below, put it below\n            bottom = '';\n\n            if (align.bottom === 'bottom') {\n              top = targetRect.top;\n            } else {\n              top = targetRect.bottom;\n            }\n\n            maxHeight = windowHeight - top;\n          }\n        }\n\n        container.style.left = left + \"px\";\n\n        if (stretch) {\n          // offset width by 0.1 to avoid a bug in ie11 that\n          // unnecessarily wraps the text if width is the same\n          // NOTE: turned off for now\n          container.style.width = width + 0.1 + \"px\";\n        } // the (position:absolute + scrollTop)\n        // is presenting issues with desktop scroll flickering\n\n\n        if (top !== '') {\n          container.style.top = top + \"px\";\n        }\n\n        if (bottom !== '') {\n          container.style.bottom = windowHeight - bottom + \"px\";\n        }\n\n        if (!preserveHeight) {\n          if (theme.drop && theme.drop.maxHeight) {\n            maxHeight = Math.min(maxHeight, (0, _utils.parseMetricToNum)(theme.drop.maxHeight));\n          }\n\n          container.style.maxHeight = maxHeight + \"px\";\n        }\n      }\n    };\n\n    var scrollParents;\n\n    var addScrollListeners = function addScrollListeners() {\n      scrollParents = (0, _utils.findScrollParents)(dropTarget);\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.addEventListener('scroll', place);\n      });\n    };\n\n    var removeScrollListeners = function removeScrollListeners() {\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.removeEventListener('scroll', place);\n      });\n      scrollParents = [];\n    };\n\n    var onClickDocument = function onClickDocument(event) {\n      // determine which portal id the target is in, if any\n      var clickedPortalId = null;\n      var node = event.target;\n\n      while (clickedPortalId === null && node !== document) {\n        var attr = node.getAttribute('data-g-portal-id');\n        if (attr !== null) clickedPortalId = parseInt(attr, 10);\n        node = node.parentNode;\n      }\n\n      if (clickedPortalId === null || portalContext.indexOf(clickedPortalId) !== -1) {\n        onClickOutside(event);\n      }\n    };\n\n    var onResize = function onResize() {\n      removeScrollListeners();\n      addScrollListeners();\n      place(false);\n    };\n\n    addScrollListeners();\n    window.addEventListener('resize', onResize);\n\n    if (onClickOutside) {\n      document.addEventListener('mousedown', onClickDocument);\n    }\n\n    place(false);\n    return function () {\n      removeScrollListeners();\n      window.removeEventListener('resize', onResize);\n\n      if (onClickOutside) {\n        document.removeEventListener('mousedown', onClickDocument);\n      }\n    };\n  }, [align, dropTarget, onClickOutside, portalContext, portalId, ref, responsive, restrictFocus, stretch, theme.drop]);\n  (0, _react.useEffect)(function () {\n    if (restrictFocus) {\n      (ref || dropRef).current.focus();\n    }\n  }, [ref, restrictFocus]);\n\n  var content = /*#__PURE__*/_react[\"default\"].createElement(_StyledDrop.StyledDrop, _extends({\n    ref: ref || dropRef,\n    as: _Box.Box,\n    plain: plain,\n    elevation: !plain ? elevation || theme.global.drop.shadowSize || 'small' : undefined,\n    tabIndex: \"-1\",\n    alignProp: align,\n    overflow: overflow,\n    \"data-g-portal-id\": portalId\n  }, rest), children);\n\n  if (theme.global.drop.background) {\n    var dark = (0, _utils.backgroundIsDark)(theme.global.drop.background, theme);\n\n    if (dark !== undefined && dark !== theme.dark) {\n      content = /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.ThemeContext.Provider, {\n        value: _extends({}, theme, {\n          dark: dark\n        })\n      }, content);\n    }\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_utils.PortalContext.Provider, {\n    value: nextPortalContext\n  }, /*#__PURE__*/_react[\"default\"].createElement(_FocusedContainer.FocusedContainer, {\n    onKeyDown: onEsc && preventLayerClose,\n    trapFocus: trapFocus\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Keyboard.Keyboard, {\n    onEsc: onEsc ? function (event) {\n      event.stopPropagation();\n      onEsc(event);\n    } : undefined,\n    onKeyDown: onKeyDown,\n    target: \"document\"\n  }, content)));\n});\nexports.DropContainer = DropContainer;","map":{"version":3,"sources":["D:/React Gormmet/react-gormmet/node_modules/grommet/components/Drop/DropContainer.js"],"names":["exports","__esModule","DropContainer","_react","_interopRequireWildcard","require","_styledComponents","_FocusedContainer","_utils","_defaultProps","_Box","_Keyboard","_StyledDrop","_getRequireWildcardCache","WeakMap","cache","obj","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","preventLayerClose","event","keyCode","which","stopPropagation","defaultAlign","top","left","defaultPortalContext","forwardRef","_ref","ref","_ref$align","align","children","dropTarget","elevation","onClickOutside","onEsc","onKeyDown","_ref$overflow","overflow","plain","responsive","restrictFocus","_ref$stretch","stretch","trapFocus","rest","theme","useContext","ThemeContext","defaultProps","portalContext","PortalContext","portalId","useMemo","nextPortalContext","concat","dropRef","useRef","useEffect","place","preserveHeight","windowWidth","window","innerWidth","windowHeight","innerHeight","container","current","style","bottom","width","maxHeight","targetRect","getBoundingClientRect","containerRect","Math","min","max","right","height","percentVisibleAreaBelow","drop","parseMetricToNum","scrollParents","addScrollListeners","findScrollParents","forEach","scrollParent","addEventListener","removeScrollListeners","removeEventListener","onClickDocument","clickedPortalId","node","document","attr","getAttribute","parseInt","parentNode","onResize","focus","content","createElement","StyledDrop","as","Box","global","shadowSize","undefined","tabIndex","alignProp","background","dark","backgroundIsDark","Provider","value","FocusedContainer","Keyboard"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.DropContainer = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _styledComponents = require(\"styled-components\");\n\nvar _FocusedContainer = require(\"../FocusedContainer\");\n\nvar _utils = require(\"../../utils\");\n\nvar _defaultProps = require(\"../../default-props\");\n\nvar _Box = require(\"../Box\");\n\nvar _Keyboard = require(\"../Keyboard\");\n\nvar _StyledDrop = require(\"./StyledDrop\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n// using react synthetic event to be able to stop propagation that\n// would otherwise close the layer on ESC.\nvar preventLayerClose = function preventLayerClose(event) {\n  var key = event.keyCode ? event.keyCode : event.which;\n\n  if (key === 27) {\n    event.stopPropagation();\n  }\n};\n\nvar defaultAlign = {\n  top: 'top',\n  left: 'left'\n};\nvar defaultPortalContext = [];\nvar DropContainer = /*#__PURE__*/(0, _react.forwardRef)(function (_ref, ref) {\n  var _ref$align = _ref.align,\n      align = _ref$align === void 0 ? defaultAlign : _ref$align,\n      children = _ref.children,\n      dropTarget = _ref.dropTarget,\n      elevation = _ref.elevation,\n      onClickOutside = _ref.onClickOutside,\n      onEsc = _ref.onEsc,\n      onKeyDown = _ref.onKeyDown,\n      _ref$overflow = _ref.overflow,\n      overflow = _ref$overflow === void 0 ? 'auto' : _ref$overflow,\n      plain = _ref.plain,\n      responsive = _ref.responsive,\n      restrictFocus = _ref.restrictFocus,\n      _ref$stretch = _ref.stretch,\n      stretch = _ref$stretch === void 0 ? 'width' : _ref$stretch,\n      trapFocus = _ref.trapFocus,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"align\", \"children\", \"dropTarget\", \"elevation\", \"onClickOutside\", \"onEsc\", \"onKeyDown\", \"overflow\", \"plain\", \"responsive\", \"restrictFocus\", \"stretch\", \"trapFocus\"]);\n\n  var theme = (0, _react.useContext)(_styledComponents.ThemeContext) || _defaultProps.defaultProps.theme;\n\n  var portalContext = (0, _react.useContext)(_utils.PortalContext) || defaultPortalContext;\n  var portalId = (0, _react.useMemo)(function () {\n    return portalContext.length;\n  }, [portalContext]);\n  var nextPortalContext = (0, _react.useMemo)(function () {\n    return [].concat(portalContext, [portalId]);\n  }, [portalContext, portalId]);\n  var dropRef = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    // We try to preserve the maxHeight as changing it causes any scroll\n    // position to be lost. We set the maxHeight on mount and if the window\n    // is resized.\n    var place = function place(preserveHeight) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var target = dropTarget;\n      var container = (ref || dropRef).current;\n\n      if (container && target) {\n        // clear prior styling\n        container.style.left = '';\n        container.style.top = '';\n        container.style.bottom = '';\n        container.style.width = '';\n\n        if (!preserveHeight) {\n          container.style.maxHeight = '';\n        } // get bounds\n\n\n        var targetRect = target.getBoundingClientRect();\n        var containerRect = container.getBoundingClientRect(); // determine width\n\n        var width;\n\n        if (stretch) {\n          width = Math.min(stretch === 'align' ? Math.min(targetRect.width, containerRect.width) : Math.max(targetRect.width, containerRect.width), windowWidth);\n        } else {\n          width = Math.min(containerRect.width, windowWidth);\n        } // set left position\n\n\n        var left;\n\n        if (align.left) {\n          if (align.left === 'left') {\n            left = targetRect.left;\n          } else if (align.left === 'right') {\n            left = targetRect.left + targetRect.width;\n          }\n        } else if (align.right) {\n          if (align.right === 'left') {\n            left = targetRect.left - width;\n          } else if (align.right === 'right') {\n            left = targetRect.left + targetRect.width - width;\n          }\n        } else {\n          left = targetRect.left + targetRect.width / 2 - width / 2;\n        }\n\n        if (left + width > windowWidth) {\n          left -= left + width - windowWidth;\n        } else if (left < 0) {\n          left = 0;\n        } // set top or bottom position\n\n\n        var top;\n        var bottom;\n        var maxHeight = containerRect.height;\n\n        if (align.top) {\n          if (align.top === 'top') {\n            top = targetRect.top;\n          } else {\n            top = targetRect.bottom;\n          } // Calculate visible area underneath the control w.r.t window height\n\n\n          var percentVisibleAreaBelow = 100 - targetRect.bottom / windowHeight * 100; // Check whether it is within 20% from bottom of the window or\n          // visible area to flip the control\n          // DropContainer doesn't fit well within visible area when\n          // percentVisibleAreaBelow value<=20%\n          // There is enough space from DropContainer to bottom of the window\n          // when percentVisibleAreaBelow>20%.\n\n          if (windowHeight === top || percentVisibleAreaBelow <= 20) {\n            // We need more room than we have.\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              bottom = targetRect.top;\n            } else {\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else if (top > 0) {\n            maxHeight = windowHeight - top;\n            container.style.maxHeight = maxHeight + \"px\";\n          } else {\n            maxHeight = windowHeight - top;\n          }\n        } else if (align.bottom) {\n          if (align.bottom === 'bottom') {\n            bottom = targetRect.bottom;\n          } else {\n            bottom = targetRect.top;\n          }\n\n          maxHeight = bottom;\n          container.style.maxHeight = maxHeight + \"px\";\n        } else {\n          // center\n          top = targetRect.top + targetRect.height / 2 - containerRect.height / 2;\n          maxHeight = windowHeight - top;\n        } // if we can't fit it all, or we're rather close,\n        // see if there's more room the other direction\n\n\n        if (responsive && (containerRect.height > maxHeight || maxHeight < windowHeight / 10)) {\n          // We need more room than we have.\n          if (align.top && top > windowHeight / 2) {\n            // We put it below, but there's more room above, put it above\n            top = '';\n\n            if (align.top === 'bottom') {\n              // top = Math.max(targetRect.top - containerRect.height, 0);\n              // maxHeight = targetRect.top - top;\n              bottom = targetRect.top;\n            } else {\n              // top = Math.max(targetRect.bottom - containerRect.height, 0);\n              // maxHeight = targetRect.bottom - top;\n              bottom = targetRect.bottom;\n            }\n\n            maxHeight = bottom;\n          } else if (align.bottom && maxHeight < windowHeight / 2) {\n            // We put it above but there's more room below, put it below\n            bottom = '';\n\n            if (align.bottom === 'bottom') {\n              top = targetRect.top;\n            } else {\n              top = targetRect.bottom;\n            }\n\n            maxHeight = windowHeight - top;\n          }\n        }\n\n        container.style.left = left + \"px\";\n\n        if (stretch) {\n          // offset width by 0.1 to avoid a bug in ie11 that\n          // unnecessarily wraps the text if width is the same\n          // NOTE: turned off for now\n          container.style.width = width + 0.1 + \"px\";\n        } // the (position:absolute + scrollTop)\n        // is presenting issues with desktop scroll flickering\n\n\n        if (top !== '') {\n          container.style.top = top + \"px\";\n        }\n\n        if (bottom !== '') {\n          container.style.bottom = windowHeight - bottom + \"px\";\n        }\n\n        if (!preserveHeight) {\n          if (theme.drop && theme.drop.maxHeight) {\n            maxHeight = Math.min(maxHeight, (0, _utils.parseMetricToNum)(theme.drop.maxHeight));\n          }\n\n          container.style.maxHeight = maxHeight + \"px\";\n        }\n      }\n    };\n\n    var scrollParents;\n\n    var addScrollListeners = function addScrollListeners() {\n      scrollParents = (0, _utils.findScrollParents)(dropTarget);\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.addEventListener('scroll', place);\n      });\n    };\n\n    var removeScrollListeners = function removeScrollListeners() {\n      scrollParents.forEach(function (scrollParent) {\n        return scrollParent.removeEventListener('scroll', place);\n      });\n      scrollParents = [];\n    };\n\n    var onClickDocument = function onClickDocument(event) {\n      // determine which portal id the target is in, if any\n      var clickedPortalId = null;\n      var node = event.target;\n\n      while (clickedPortalId === null && node !== document) {\n        var attr = node.getAttribute('data-g-portal-id');\n        if (attr !== null) clickedPortalId = parseInt(attr, 10);\n        node = node.parentNode;\n      }\n\n      if (clickedPortalId === null || portalContext.indexOf(clickedPortalId) !== -1) {\n        onClickOutside(event);\n      }\n    };\n\n    var onResize = function onResize() {\n      removeScrollListeners();\n      addScrollListeners();\n      place(false);\n    };\n\n    addScrollListeners();\n    window.addEventListener('resize', onResize);\n\n    if (onClickOutside) {\n      document.addEventListener('mousedown', onClickDocument);\n    }\n\n    place(false);\n    return function () {\n      removeScrollListeners();\n      window.removeEventListener('resize', onResize);\n\n      if (onClickOutside) {\n        document.removeEventListener('mousedown', onClickDocument);\n      }\n    };\n  }, [align, dropTarget, onClickOutside, portalContext, portalId, ref, responsive, restrictFocus, stretch, theme.drop]);\n  (0, _react.useEffect)(function () {\n    if (restrictFocus) {\n      (ref || dropRef).current.focus();\n    }\n  }, [ref, restrictFocus]);\n\n  var content = /*#__PURE__*/_react[\"default\"].createElement(_StyledDrop.StyledDrop, _extends({\n    ref: ref || dropRef,\n    as: _Box.Box,\n    plain: plain,\n    elevation: !plain ? elevation || theme.global.drop.shadowSize || 'small' : undefined,\n    tabIndex: \"-1\",\n    alignProp: align,\n    overflow: overflow,\n    \"data-g-portal-id\": portalId\n  }, rest), children);\n\n  if (theme.global.drop.background) {\n    var dark = (0, _utils.backgroundIsDark)(theme.global.drop.background, theme);\n\n    if (dark !== undefined && dark !== theme.dark) {\n      content = /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.ThemeContext.Provider, {\n        value: _extends({}, theme, {\n          dark: dark\n        })\n      }, content);\n    }\n  }\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_utils.PortalContext.Provider, {\n    value: nextPortalContext\n  }, /*#__PURE__*/_react[\"default\"].createElement(_FocusedContainer.FocusedContainer, {\n    onKeyDown: onEsc && preventLayerClose,\n    trapFocus: trapFocus\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Keyboard.Keyboard, {\n    onEsc: onEsc ? function (event) {\n      event.stopPropagation();\n      onEsc(event);\n    } : undefined,\n    onKeyDown: onKeyDown,\n    target: \"document\"\n  }, content)));\n});\nexports.DropContainer = DropContainer;"]},"metadata":{},"sourceType":"script"}